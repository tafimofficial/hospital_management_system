{% extends 'base.html' %}

{% block content %}
<div class="container" style="padding: 40px 20px;">
    <h1 style="text-align: center; color: #e74c3c; margin-bottom: 30px;"><i class="fas fa-search"></i> Find Blood Donors
    </h1>

    <!-- Filter -->
    <div
        style="background: white; padding: 20px; border-radius: 10px; box-shadow: var(--shadow); margin-bottom: 30px; max-width: 600px; margin-left: auto; margin-right: auto;">
        <form method="get" style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
            <label style="font-weight: 600;">Filter by Blood Group:</label>
            <select name="blood_group" style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                <option value="">All Groups</option>
                <option value="A+" {% if current_filter == 'A+' %}selected{% endif %}>A+</option>
                <option value="A-" {% if current_filter == 'A-' %}selected{% endif %}>A-</option>
                <option value="B+" {% if current_filter == 'B+' %}selected{% endif %}>B+</option>
                <option value="B-" {% if current_filter == 'B-' %}selected{% endif %}>B-</option>
                <option value="AB+" {% if current_filter == 'AB+' %}selected{% endif %}>AB+</option>
                <option value="AB-" {% if current_filter == 'AB-' %}selected{% endif %}>AB-</option>
                <option value="O+" {% if current_filter == 'O+' %}selected{% endif %}>O+</option>
                <option value="O-" {% if current_filter == 'O-' %}selected{% endif %}>O-</option>
            </select>
            <button type="submit" class="btn" style="background-color: #e74c3c;">Filter</button>
            {% if current_filter %}
            <a href="{% url 'find_donors' %}" class="btn" style="background-color: #666;">Reset</a>
            {% endif %}
        </form>
    </div>

    <!-- Donors Grid -->
    {% if donors %}
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px;">
        {% for donor in donors %}
        <div
            style="background: white; border-radius: 12px; box-shadow: var(--shadow); overflow: hidden; border-left: 5px solid #e74c3c;">
            <div style="padding: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h3 style="margin: 0; color: #333;">{{ donor.name }}</h3>
                    <span
                        style="background: #ffebee; color: #e74c3c; padding: 5px 10px; border-radius: 15px; font-weight: 700;">
                        {{ donor.blood_group }}
                    </span>
                </div>
                <p style="color: #666; margin-bottom: 10px;"><i class="fas fa-phone"
                        style="color: #e74c3c; width: 20px;"></i> {{ donor.contact_number }}</p>
                {% if donor.last_donation_date %}
                <p style="color: #666; font-size: 0.9rem;"><i class="fas fa-calendar-check"
                        style="color: #e74c3c; width: 20px;"></i> Last Donated: {{ donor.last_donation_date }}</p>
                {% else %}
                <p style="color: #666; font-size: 0.9rem;"><i class="fas fa-calendar-check"
                        style="color: #e74c3c; width: 20px;"></i> New Donor</p>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div style="text-align: center; padding: 50px; color: #666;">
        <i class="fas fa-users-slash fa-3x" style="margin-bottom: 20px; color: #ccc;"></i>
        <p>No donors found matching your criteria.</p>
    </div>
    {% endif %}
</div>
{% endblock %}